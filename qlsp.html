<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Qu·∫£n l√Ω s·∫£n ph·∫©m</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
  <style>
    body { background-color: #f8f9fa; }
    .sidebar {
      width: 250px;
      height: 100vh;
      background-color: #212529;
      color: white;
      position: fixed;
      padding: 20px 10px;
    }
    .sidebar a {
      color: #ccc;
      text-decoration: none;
      display: block;
      margin: 10px 0;
      padding: 8px 15px;
      border-radius: 6px;
    }
    .sidebar a:hover { background-color: #343a40; color: white; }
    .main { margin-left: 260px; padding: 20px 40px; }
    .action-btn { margin: 0 2px; }
  </style>
</head>
<body>
  <div class="sidebar">
    <h4>B·∫£ng ƒëi·ªÅu khi·ªÉn</h4>
    <a href="#"><i class="bi bi-speedometer2"></i> B·∫£ng ƒëi·ªÅu khi·ªÉn</a>
    <a href="#"><i class="bi bi-people"></i> Qu·∫£n l√Ω ng∆∞·ªùi d√πng</a>
    <a href="#"><i class="bi bi-laptop"></i> Qu·∫£n l√Ω s·∫£n ph·∫©m</a>
    <a href="#"><i class="bi bi-bag"></i> ƒê∆°n ƒë·∫∑t h√†ng</a>
  </div>

  <div class="main">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <div>
        <h2 class="fw-bold">Qu·∫£n l√Ω s·∫£n ph·∫©m</h2>
        <a href="#" class="text-decoration-none text-muted">B·∫£ng ƒëi·ªÅu khi·ªÉn / S·∫£n ph·∫©m</a>
      </div>
      <!-- üëâ Khi nh·∫•n s·∫Ω chuy·ªÉn sang add-product.html -->
      <button class="btn btn-primary" onclick="window.location='themsp.html'">
        <i class="bi bi-plus-circle"></i> Th√™m s·∫£n ph·∫©m
      </button>
    </div>

    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="mb-3 fw-semibold">Danh s√°ch s·∫£n ph·∫©m</h5>
        <div class="table-responsive">
          <table class="table table-bordered align-middle" id="productTable">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>T√™n</th>
                <th>Gi√°</th>
                <th>T√°c gi·∫£</th>
                <th>H√†nh ƒë·ªông</th>
              </tr>
            </thead>
            <tbody id="productBody"></tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ======= ƒê·ªåC D·ªÆ LI·ªÜU T·ª™ LOCAL STORAGE =======
    let products = JSON.parse(localStorage.getItem("products") || "[]");

    const productBody = document.getElementById("productBody");

    function renderProducts() {
      productBody.innerHTML = "";
      if (products.length === 0) {
        productBody.innerHTML = "<tr><td colspan='5' class='text-center text-muted'>Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o</td></tr>";
        return;
      }

      products.forEach((p, i) => {
        const row = `
          <tr>
            <td>${i + 1}</td>
            <td>${p.name}</td>
            <td>${p.price.toLocaleString('vi-VN')}‚Ç´</td>
            <td>${p.brand}</td>
            <td>
              <button class="btn btn-warning btn-sm" onclick="editProduct(${i})"><i class="bi bi-pencil"></i> C·∫≠p nh·∫≠t</button>
              <button class="btn btn-danger btn-sm" onclick="deleteProduct(${i})"><i class="bi bi-trash"></i> X√≥a</button>
            </td>
          </tr>`;
        productBody.insertAdjacentHTML("beforeend", row);
      });
    }

    function deleteProduct(index) {
      if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a s·∫£n ph·∫©m n√†y?")) {
        products.splice(index, 1);
        localStorage.setItem("products", JSON.stringify(products));
        renderProducts();
      }
    }

    renderProducts();
  </script>
</body>
</html>
