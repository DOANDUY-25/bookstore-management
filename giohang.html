<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Giỏ hàng | Mẫu tái dựng</title>
  <style>
    :root { --max: 1100px; --gap: 1rem; }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; color: #111; }
    a { color: inherit; text-decoration: none; }
    header { border-bottom: 1px solid #eee; }
    .topbar { display:flex; gap:.75rem; justify-content:flex-end; padding:.5rem 1rem; font-size:.9rem; }
    .topbar a { opacity:.8 }
    .container { max-width: var(--max); margin: 0 auto; padding: 0 1rem; }
    .nav { display:flex; align-items:center; gap:1rem; padding: .75rem 0; flex-wrap:wrap; }
    .nav .brand { font-weight:700; letter-spacing:.3px; }
    .nav ul { list-style:none; display:flex; gap:.75rem; padding:0; margin:0; overflow:auto; }
    .nav li { white-space:nowrap; }
    .breadcrumb { font-size:.9rem; opacity:.75; margin: .75rem 0 0; }
    main { padding: 1.25rem 0 3rem; }
    h1 { font-size:1.6rem; margin:.5rem 0 1rem; }
    .cart { display:grid; grid-template-columns: 2fr 1fr; gap: 1.25rem; }
    @media (max-width: 920px){ .cart { grid-template-columns: 1fr; } }
    .card { border:1px solid #eee; border-radius:12px; padding:1rem; }
    table { width:100%; border-collapse: collapse; }
    th, td { padding:.75rem; border-bottom:1px solid #f0f0f0; text-align:left; vertical-align: middle; }
    th { font-size:.9rem; opacity:.8; }
    .qty { display:flex; align-items:center; gap:.5rem; }
    .qty button { width:28px; height:28px; border:1px solid #ddd; border-radius:6px; background:#fff; cursor:pointer; }
    .right .summary-row { display:flex; justify-content:space-between; margin:.4rem 0; }
    .right .total { font-weight:700; font-size:1.1rem; }
    .right .actions { display:grid; gap:.5rem; margin-top:.75rem; }
    .right .actions button { padding:.85rem 1rem; border:none; border-radius:10px; cursor:pointer; }
    .primary { background:#111; color:#fff; }
    .outline { background:#fff; border:1px solid #ddd; }
    .section-title { font-weight:600; margin:.75rem 0 .5rem; }
    .grid { display:grid; grid-template-columns:1fr 1fr; gap:.75rem; }
    @media (max-width:720px){ .grid { grid-template-columns:1fr; } }
    input, select { width:100%; padding:.7rem .8rem; border:1px solid #ddd; border-radius:10px; }
    footer { background:#fafafa; border-top:1px solid #eee; padding:2rem 0; }
    .footer-grid { display:grid; grid-template-columns: 2fr 1fr 1fr 1fr; gap:1rem; }
    @media (max-width:920px){ .footer-grid { grid-template-columns:1fr 1fr; } }
    .muted { opacity:.8; }
    .social { display:flex; gap:.75rem; flex-wrap:wrap; }
    .badge { display:inline-flex; align-items:center; gap:.4rem; border:1px solid #eee; padding:.35rem .6rem; border-radius:999px; font-size:.85rem; }
  </style>
</head>
<body>
  <header>
    <div class="topbar container">
      <a href="#">Đăng nhập</a>
      <a href="#">Đăng ký</a>
    </div>
    <div class="container nav">
      <div class="brand"><a href="/"> (Demo)</a></div>
      <nav aria-label="Chuyên mục">
        <ul>
          <li><a href="#">Trang chủ</a></li>
          <li><a href="#">Tin Sách</a></li>
          <li><a href="#">Sách </a></li>
          <li><a href="#">Tác giả</a></li>
          <li><a href="#">Cuộc thi</a></li>
          <li><a href="#">Về sản phẩm</a></li>
          <li><a href="#">Liên hệ</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <div class="container breadcrumb">Trang chủ / Giỏ hàng</div>
  <main class="container">
    <h1>Giỏ hàng của bạn</h1>

    <div class="cart">
      <!-- LEFT: items + options -->
      <section class="card left">
        <table id="cart-table" aria-label="Sản phẩm trong giỏ">
          <thead>
            <tr>
              <th>Sản phẩm</th>
              <th>Đơn giá</th>
              <th>Số lượng</th>
              <th>Tạm tính</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- Hàng mẫu; thay bằng render từ dữ liệu -->
            <tr data-id="1">
              <td>
                <div style="display:flex; gap:.75rem; align-items:center">
                  <img src="https://via.placeholder.com/64x84" alt="" width="64" height="84" />
                  <div>
                    <div><strong>Tựa sách A</strong></div>
                    <div class="muted" style="font-size:.9rem">Tác giả X • Bìa mềm</div>
                  </div>
                </div>
              </td>
              <td data-price="105000">105.000₫</td>
              <td>
                <div class="qty" role="group" aria-label="Điều chỉnh số lượng">
                  <button class="dec" aria-label="Giảm">−</button>
                  <input class="q" type="number" min="1" value="1" style="width:60px; text-align:center" />
                  <button class="inc" aria-label="Tăng">+</button>
                </div>
              </td>
              <td class="line-total">105.000₫</td>
              <td><button class="outline remove">Xóa</button></td>
            </tr>
            <tr data-id="2">
              <td>
                <div style="display:flex; gap:.75rem; align-items:center">
                  <img src="https://via.placeholder.com/64x84" alt="" width="64" height="84" />
                  <div>
                    <div><strong>Tựa sách B</strong></div>
                    <div class="muted" style="font-size:.9rem">Tác giả Y • Bìa cứng</div>
                  </div>
                </div>
              </td>
              <td data-price="89000">89.000₫</td>
              <td>
                <div class="qty" role="group" aria-label="Điều chỉnh số lượng">
                  <button class="dec" aria-label="Giảm">−</button>
                  <input class="q" type="number" min="1" value="2" style="width:60px; text-align:center" />
                  <button class="inc" aria-label="Tăng">+</button>
                </div>
              </td>
              <td class="line-total">178.000₫</td>
              <td><button class="outline remove">Xóa</button></td>
            </tr>
          </tbody>
        </table>

        <div class="grid" style="margin-top:1rem">
          <div class="card" style="border:none; padding:0">
            <div class="section-title">Thời gian giao hàng</div>
            <select id="slot">
              <option>Chọn thời gian</option>
              <option>08h00 - 12h00</option>
              <option>14h00 - 18h00</option>
              <option>19h00 - 21h00</option>
            </select>
          </div>

          <div class="card" style="border:none; padding:0">
            <label class="section-title" style="display:flex; align-items:center; gap:.5rem">
              <input id="needInvoice" type="checkbox" /> Xuất hóa đơn công ty
            </label>
            <div id="invoiceFields" aria-hidden="true" style="display:none; margin-top:.5rem">
              <div class="grid">
                <div>
                  <div class="section-title">Tên công ty</div>
                  <input placeholder="Công ty ABC" />
                </div>
                <div>
                  <div class="section-title">Mã số thuế</div>
                  <input placeholder="0100xxxxxx" />
                </div>
                <div>
                  <div class="section-title">Địa chỉ công ty</div>
                  <input placeholder="Số, đường, phường, quận, TP" />
                </div>
                <div>
                  <div class="section-title">Email nhận hoá đơn</div>
                  <input type="email" placeholder="ketoan@abc.com" />
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- RIGHT: summary -->
      <aside class="card right" aria-label="Tổng kết đơn hàng">
        <div class="summary-row"><span>Tạm tính</span><span id="subtotal">0₫</span></div>
        <div class="summary-row"><span>Phí vận chuyển</span><span id="shipping">0₫</span></div>
        <div class="summary-row"><span>Khuyến mãi</span><span id="discount">0₫</span></div>
        <hr />
        <div class="summary-row total"><span>Tổng cộng</span><span id="grand">0₫</span></div>
        <div class="actions">
          <button class="primary" id="checkout">Tiến hành đặt hàng</button>
          <button class="outline" id="keepShopping">Tiếp tục mua sắm</button>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container footer-grid">
      <div>
        <div class="section-title">Nhận thông tin khuyến mãi từ chúng tôi</div>
        <div class="grid" style="grid-template-columns:2fr 1fr">
          <input placeholder="Nhập email của bạn" />
          <button class="primary">Đăng kí</button>
        </div>
        <div class="social" style="margin-top:.75rem">
          <span class="badge">Facebook</span>
          <span class="badge">Instagram</span>
          <span class="badge">Lazada</span>
          <span class="badge">Shopee</span>
          <span class="badge">TikTok</span>
        </div>
      </div>

      <div>
        <div class="section-title">Giới thiệu</div>
        <ul style="padding-left:1rem; margin:.25rem 0">
          
          <li><a href="#">Hệ thống hiệu sách</a></li>
          <li><a href="#">Hệ thống phát hành</a></li>
          <li><a href="#">Tuyển dụng</a></li>
          <li><a href="#">Liên hệ với chúng tôi</a></li>
        </ul>
      </div>

      <div>
        <div class="section-title">Chính sách</div>
        <ul style="padding-left:1rem; margin:.25rem 0">
          <li><a href="#">Chính sách bảo mật</a></li>
          <li><a href="#">Chính sách đổi trả/hoàn tiền</a></li>
          <li><a href="#">Chính sách thanh toán/ vận chuyển</a></li>
        </ul>
      </div>

      <div>
        <div class="section-title">Liên hệ</div>
        <div class="muted">Số 1, Nhổn, Hà Nội</div>
        <div class="muted">Khanh.vn</div>
        <div class="muted">0123444432</div>
      </div>
    </div>
  </footer>

  <script>
    // Helpers
    const vnd = n => n.toLocaleString('vi-VN') + '₫';
    const rows = () => Array.from(document.querySelectorAll('#cart-table tbody tr'));

    function recalc(){
      let subtotal = 0;
      rows().forEach(tr => {
        const price = Number(tr.querySelector('td[data-price]').dataset.price);
        const qty = Math.max(1, Number(tr.querySelector('input.q').value || 1));
        const line = price * qty;
        tr.querySelector('.line-total').textContent = vnd(line);
        subtotal += line;
      });
      document.getElementById('subtotal').textContent = vnd(subtotal);
      const shipping = subtotal > 300000 ? 0 : (subtotal === 0 ? 0 : 30000);
      document.getElementById('shipping').textContent = vnd(shipping);
      const discount = 0;
      document.getElementById('discount').textContent = vnd(discount);
      document.getElementById('grand').textContent = vnd(subtotal + shipping - discount);
    }

    // Quantity handlers
    document.addEventListener('click', (e) => {
      if(e.target.matches('.inc, .dec')){
        const tr = e.target.closest('tr');
        const input = tr.querySelector('input.q');
        const val = Number(input.value || 1);
        input.value = e.target.classList.contains('inc') ? val + 1 : Math.max(1, val - 1);
        recalc();
      }
      if(e.target.matches('.remove')){
        e.target.closest('tr').remove();
        recalc();
      }
    });

    document.addEventListener('input', (e) => {
      if(e.target.matches('input.q')) recalc();
    });

    // Invoice toggle
    const cb = document.getElementById('needInvoice');
    const invoice = document.getElementById('invoiceFields');
    cb.addEventListener('change', () => {
      const on = cb.checked;
      invoice.style.display = on ? 'block' : 'none';
      invoice.setAttribute('aria-hidden', on ? 'false' : 'true');
    });

    // CTA (demo)
    document.getElementById('checkout').addEventListener('click', () => {
      alert('Đây là bản demo giao diện giỏ hàng.');
    });
    document.getElementById('keepShopping').addEventListener('click', () => {
      history.back();
    });

    recalc();
  </script>
</body>
</html>
